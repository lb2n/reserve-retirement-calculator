<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free calculator for U.S. military reservists and National Guard members to estimate retirement pay. Supports High-36 and BRS systems, COLA projections, and SBP calculations.">
    <meta name="keywords" content="military retirement calculator, reserve retirement pay, National Guard retirement, High-36, BRS, blended retirement system, COLA, SBP, survivor benefit plan">
    <meta name="author" content="Reserve Retirement Calculator">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Reserve Retirement Pay Calculator">
    <meta property="og:description" content="Free calculator for U.S. military reservists to estimate retirement pay with COLA projections and SBP options.">
    <meta property="og:image" content="BlueAngelsPic.jpeg">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Reserve Retirement Pay Calculator">
    <meta name="twitter:description" content="Free calculator for U.S. military reservists to estimate retirement pay.">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <title>Reserve Retirement Pay Calculator | Military Reserve & National Guard</title>
    <style>
        :root {
            --navy-primary: #003366;
            --navy-dark: #001a33;
            --navy-light: #004d99;
            --gold: #c9a227;
            --gold-light: #d4b85a;
            --white: #ffffff;
            --gray-light: #f0f4f8;
            --gray: #b8c0cc;
            --success: #10b981;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--navy-dark);
            min-height: 100vh;
            color: var(--white);
            position: relative;
        }

        /* Blue Angels background image - U.S. Navy public domain photo */
        body::before {
            content: '';
            position: fixed;
            top: 120px; /* Start below the header */
            left: 0;
            width: 100%;
            height: calc(100% - 120px);
            background:
                linear-gradient(180deg,
                    rgba(0, 26, 51, 0.65) 0%,
                    rgba(0, 51, 102, 0.55) 50%,
                    rgba(0, 77, 153, 0.45) 100%),
                url('BlueAngelsPic.jpeg') center top / cover no-repeat;
            z-index: -2;
        }

        /* Fallback gradient background */
        body {
            background: linear-gradient(180deg,
                #0a1628 0%,
                #1a3a5c 25%,
                #2d5a87 50%,
                #4a90c2 75%,
                #87ceeb 100%);
        }

        .header {
            background: #001a33; /* Solid dark navy for header */
            padding: 1.5rem 2rem;
            border-bottom: 3px solid var(--gold);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: var(--navy-dark);
            border: 3px solid var(--white);
        }

        .header-text h1 {
            font-size: 1.75rem;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .header-text p {
            color: var(--gold);
            font-size: 0.95rem;
            margin-top: 0.25rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .disclaimer {
            background: rgba(201, 162, 39, 0.15);
            border: 1px solid var(--gold);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .disclaimer strong {
            color: var(--gold);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gold);
        }

        .card-header svg {
            width: 28px;
            height: 28px;
            color: var(--gold);
        }

        .card-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--gray-light);
        }

        .form-group .hint {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 0.25rem;
        }

        .pay-growth-note {
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid var(--success);
            border-radius: 6px;
            padding: 0.75rem 1rem;
            margin-top: 0.75rem;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .early-retirement-link {
            display: inline-block;
            margin-top: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(201, 162, 39, 0.2);
            border: 1px solid var(--gold);
            border-radius: 6px;
            color: var(--gold-light);
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .early-retirement-link:hover {
            background: rgba(201, 162, 39, 0.35);
            color: var(--white);
            transform: translateX(3px);
        }

        .yos-calculator {
            margin-top: 0.75rem;
        }

        .yos-calc-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: var(--gold-light);
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .yos-calc-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
        }

        .yos-calc-section {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 0.75rem;
        }

        .yos-calc-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .yos-calc-row label {
            color: var(--gray);
        }

        .yos-calc-row input {
            width: 120px;
            padding: 0.4rem 0.6rem;
            font-size: 0.9rem;
        }

        .yos-calc-value {
            color: var(--gold-light);
            font-weight: 500;
        }

        .yos-calc-result {
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid var(--success);
            border-radius: 6px;
            padding: 0.75rem 1rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .yos-calc-result strong {
            color: var(--success);
        }

        .yos-calc-explanation {
            font-size: 0.8rem;
            color: var(--gray);
            margin-top: 0.5rem;
            margin-bottom: 0;
        }

        input, select {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--gold);
            background: rgba(255, 255, 255, 0.15);
        }

        select option {
            background: var(--navy-dark);
            color: var(--white);
        }

        .radio-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .radio-option {
            flex: 1;
            min-width: 140px;
        }

        .radio-option input {
            display: none;
        }

        .radio-option label {
            display: block;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .radio-option input:checked + label {
            background: rgba(201, 162, 39, 0.3);
            border-color: var(--gold);
            color: var(--gold-light);
        }

        .radio-option label:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-group label {
            cursor: pointer;
            margin: 0;
        }

        .calculate-btn {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: var(--navy-dark);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(201, 162, 39, 0.4);
        }

        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .result-card {
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.2) 0%, rgba(201, 162, 39, 0.05) 100%);
            border: 2px solid var(--gold);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .result-card h3 {
            font-size: 1rem;
            color: var(--gold-light);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .result-card .amount {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--white);
        }

        .result-card .subtext {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 0.5rem;
        }

        .breakdown {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .breakdown-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .breakdown-row:last-child {
            border-bottom: none;
        }

        .breakdown-row.total {
            font-weight: 600;
            color: var(--gold);
            border-top: 2px solid var(--gold);
            margin-top: 0.5rem;
            padding-top: 0.75rem;
        }

        .cola-projections {
            margin-top: 1.5rem;
        }

        .cola-projections h4 {
            color: var(--gold);
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .projection-table {
            width: 100%;
            border-collapse: collapse;
        }

        .projection-table th,
        .projection-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .projection-table th {
            color: var(--gold-light);
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
        }

        .projection-table td {
            font-size: 0.95rem;
        }

        .info-tooltip {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            font-size: 0.75rem;
            cursor: help;
            margin-left: 0.5rem;
            position: relative;
        }

        .info-tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--navy-dark);
            color: var(--white);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 400;
            white-space: normal;
            width: 250px;
            text-align: left;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--gold);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
            z-index: 1000;
            line-height: 1.4;
        }

        .info-tooltip::before {
            content: '';
            position: absolute;
            bottom: calc(100% + 2px);
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: var(--gold);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
            z-index: 1001;
        }

        .info-tooltip:hover::after,
        .info-tooltip:hover::before,
        .info-tooltip:focus::after,
        .info-tooltip:focus::before,
        .info-tooltip.active::after,
        .info-tooltip.active::before {
            opacity: 1;
            visibility: visible;
        }

        .info-tooltip:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--gray);
            font-size: 0.85rem;
        }

        .footer a {
            color: var(--gold);
            text-decoration: none;
        }

        .tab-container {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tab {
            flex: 1;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--white);
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tab.active {
            background: rgba(201, 162, 39, 0.3);
            border-color: var(--gold);
            color: var(--gold-light);
        }

        .tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.15);
        }

        .hidden {
            display: none;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        @media (max-width: 600px) {
            .input-row {
                grid-template-columns: 1fr;
            }

            .header {
                padding: 1rem;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .header-text h1 {
                font-size: 1.25rem;
            }

            .logo {
                width: 60px;
                height: 60px;
            }

            .container {
                padding: 1rem;
            }

            .nav-bar {
                padding: 0.5rem 1rem;
            }

            .nav-bar ul {
                flex-wrap: wrap;
                gap: 1rem;
                justify-content: center;
            }

            .card {
                padding: 1rem;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-content {
                margin: 0.5rem;
                padding: 1.5rem;
            }

            .modal-buttons {
                flex-direction: column;
            }

            .yos-calc-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .yos-calc-row input {
                width: 100%;
            }

            .footer {
                padding: 1rem;
                font-size: 0.85rem;
            }
        }

        @media (max-width: 400px) {
            .summary-grid {
                grid-template-columns: 1fr;
            }

            .radio-group {
                flex-direction: column;
            }

            .radio-option {
                width: 100%;
            }
        }

        .anchor-icon {
            position: relative;
        }

        .anchor-icon::before {
            content: "‚öì";
            font-size: 2.5rem;
        }

        .sbp-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .warning-text {
            color: var(--warning);
            font-size: 0.85rem;
            margin-top: 0.5rem;
        }

        .age-display {
            background: rgba(201, 162, 39, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            text-align: center;
        }

        .age-display .label {
            font-size: 0.85rem;
            color: var(--gray-light);
        }

        .age-display .value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--gold);
        }

        /* Skip link for accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--gold);
            color: var(--navy-dark);
            padding: 8px 16px;
            z-index: 1000;
            font-weight: 600;
            text-decoration: none;
            border-radius: 0 0 4px 0;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Focus styles for accessibility */
        *:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }

        *:focus:not(:focus-visible) {
            outline: none;
        }

        *:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }

        /* Error message styles */
        .error-message {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid #ef4444;
            border-radius: 6px;
            padding: 0.75rem 1rem;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #fca5a5;
            display: none;
        }

        .error-message.visible {
            display: block;
        }

        .input-error {
            border-color: #ef4444 !important;
        }

        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Print styles */
        @media print {
            body::before,
            body::after {
                display: none !important;
            }

            body {
                background: white !important;
                color: black !important;
            }

            .header {
                background: white !important;
                color: black !important;
                border-bottom: 2px solid #003366 !important;
                position: relative !important;
            }

            .header-text h1,
            .header-text p {
                color: #003366 !important;
            }

            .card {
                background: white !important;
                border: 1px solid #ccc !important;
                box-shadow: none !important;
                break-inside: avoid;
            }

            .card-header {
                border-bottom-color: #003366 !important;
            }

            .card-header h2 {
                color: #003366 !important;
            }

            .btn, .early-retirement-link, .yos-calculator {
                display: none !important;
            }

            .results-card {
                display: block !important;
            }

            .result-value {
                color: #003366 !important;
            }

            .disclaimer {
                background: #f5f5f5 !important;
                border-color: #ccc !important;
                color: black !important;
            }

            .nav-bar {
                display: none !important;
            }

            .footer {
                background: white !important;
                color: black !important;
                border-top: 1px solid #ccc !important;
            }
        }

        /* Navigation bar */
        .nav-bar {
            background: rgba(0, 26, 51, 0.95);
            padding: 0.5rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-bar ul {
            max-width: 1200px;
            margin: 0 auto;
            list-style: none;
            display: flex;
            gap: 2rem;
        }

        .nav-bar a {
            color: var(--gray);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .nav-bar a:hover,
        .nav-bar a.active {
            color: var(--gold);
        }

        /* Legal disclaimer modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-overlay.visible {
            display: flex;
        }

        .modal-content {
            background: var(--navy-dark);
            border: 2px solid var(--gold);
            border-radius: 12px;
            padding: 2rem;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            margin: 1rem;
        }

        .modal-content h2 {
            color: var(--gold);
            margin-bottom: 1rem;
        }

        .modal-content p {
            margin-bottom: 1rem;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .modal-content ul {
            margin: 1rem 0 1rem 1.5rem;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .modal-buttons button {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-accept {
            background: var(--gold);
            color: var(--navy-dark);
            border: none;
            font-weight: 600;
        }

        .btn-accept:hover {
            background: var(--gold-light);
        }

        .btn-decline {
            background: transparent;
            color: var(--gray);
            border: 1px solid var(--gray);
        }

        .btn-decline:hover {
            border-color: var(--white);
            color: var(--white);
        }

    </style>
</head>
<body>
    <!-- Skip link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Disclaimer Modal -->
    <div class="modal-overlay" id="disclaimerModal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
            <h2 id="modalTitle">Important Disclaimer</h2>
            <p><strong>This calculator provides estimates only.</strong> Actual retirement pay may differ based on factors not captured here.</p>
            <p>By using this calculator, you acknowledge that:</p>
            <ul>
                <li>Results are <strong>estimates only</strong> and not official calculations</li>
                <li>Pay tables, COLA rates, and regulations may change</li>
                <li>For official retirement pay calculations, contact <strong>DFAS</strong> or your servicing personnel office</li>
                <li>This tool does not constitute financial or legal advice</li>
                <li>We do not collect or store any personal information you enter</li>
            </ul>
            <p>Always verify important financial decisions with official sources.</p>
            <div class="modal-buttons">
                <button class="btn-accept" onclick="acceptDisclaimer()">I Understand, Continue</button>
                <button class="btn-decline" onclick="declineDisclaimer()">Leave Site</button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="nav-bar" aria-label="Main navigation">
        <ul>
            <li><a href="reserve-retirement-calculator.html" class="active" aria-current="page">Retirement Pay Calculator</a></li>
            <li><a href="early-retirement-calculator.html">Early Retirement Eligibility</a></li>
        </ul>
    </nav>

    <header class="header" role="banner">
        <div class="header-content">
            <div class="logo anchor-icon"></div>
            <div class="header-text">
                <h1>Reserve Retirement Pay Calculator</h1>
                <p>Estimate Your Non-Regular (Reserve/Guard) Retired Pay</p>
            </div>
        </div>
    </header>

    <main class="container" id="main-content" role="main">
        <div class="disclaimer" role="alert">
            <strong>‚ö†Ô∏è Disclaimer:</strong> This calculator provides <strong>estimates only</strong> and should not be used for official planning purposes.
            Actual retirement pay may vary based on individual circumstances. Consult with a military pay office or <a href="https://www.dfas.mil" target="_blank" rel="noopener noreferrer">DFAS</a> for official calculations.
            Pay rates are based on 2026 military pay tables. <strong>We do not collect or store any information you enter.</strong>
        </div>

        <div class="main-grid">
            <!-- Input Section -->
            <div class="card">
                <div class="card-header">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                    </svg>
                    <h2>Your Information</h2>
                </div>

                <!-- Retirement System Selection -->
                <div class="form-group">
                    <label>Retirement System
                        <span class="info-tooltip" tabindex="0" data-tooltip="High-36 (Legacy): Uses 2.5% multiplier per year. For those who joined before Jan 1, 2018 and didn't opt into BRS. BRS (Blended): Uses 2.0% multiplier plus TSP matching. For those who joined after Jan 1, 2018 or opted in.">?</span>
                    </label>
                    <div class="tab-container">
                        <button type="button" class="tab active" data-system="high36" onclick="selectSystem('high36')">High-36 (Legacy)</button>
                        <button type="button" class="tab" data-system="brs" onclick="selectSystem('brs')">BRS (Blended)</button>
                    </div>
                    <p class="hint" id="systemHint">For members who entered service before January 1, 2018, and did not opt into BRS.</p>
                </div>

                <!-- Total Retirement Points -->
                <div class="form-group">
                    <label for="totalPoints">Total Retirement Points
                        <span class="info-tooltip" tabindex="0" data-tooltip="Find this on your Retirement Points Statement (RPS) or in your personnel records. You can also check your points in DPRIS, vMPF, or HRC depending on your branch." aria-label="Help: How to find your retirement points">?</span>
                    </label>
                    <input type="number" id="totalPoints" placeholder="e.g., 3600" min="1000" max="15000" value="" aria-describedby="totalPointsHint" required>
                    <p class="hint" id="totalPointsHint">Minimum 1,000 points required for retirement eligibility</p>
                </div>

                <!-- Pay Grade at Retirement -->
                <div class="form-group">
                    <label>Pay Grade at Retirement
                        <span class="info-tooltip" tabindex="0" data-tooltip="Select your highest pay grade (rank) at retirement. Your retirement pay is calculated based on this grade and your years of service. Reserve retirement uses the pay rate in effect when you start receiving pay.">?</span>
                    </label>
                    <select id="payGrade">
                        <optgroup label="Enlisted">
                            <option value="E-1">E-1 - Seaman Recruit / Private</option>
                            <option value="E-2">E-2 - Seaman Apprentice / Private</option>
                            <option value="E-3">E-3 - Seaman / Private First Class</option>
                            <option value="E-4">E-4 - Petty Officer 3rd Class / Specialist</option>
                            <option value="E-5">E-5 - Petty Officer 2nd Class / Sergeant</option>
                            <option value="E-6" selected>E-6 - Petty Officer 1st Class / Staff Sergeant</option>
                            <option value="E-7">E-7 - Chief Petty Officer / Sergeant First Class</option>
                            <option value="E-8">E-8 - Senior Chief Petty Officer / Master Sergeant</option>
                            <option value="E-9">E-9 - Master Chief Petty Officer / Sergeant Major</option>
                        </optgroup>
                        <optgroup label="Warrant Officers">
                            <option value="W-1">W-1 - Warrant Officer 1</option>
                            <option value="W-2">W-2 - Chief Warrant Officer 2</option>
                            <option value="W-3">W-3 - Chief Warrant Officer 3</option>
                            <option value="W-4">W-4 - Chief Warrant Officer 4</option>
                            <option value="W-5">W-5 - Chief Warrant Officer 5</option>
                        </optgroup>
                        <optgroup label="Officers">
                            <option value="O-1">O-1 - Ensign / Second Lieutenant</option>
                            <option value="O-2">O-2 - Lieutenant JG / First Lieutenant</option>
                            <option value="O-3">O-3 - Lieutenant / Captain</option>
                            <option value="O-4">O-4 - Lieutenant Commander / Major</option>
                            <option value="O-5">O-5 - Commander / Lieutenant Colonel</option>
                            <option value="O-6">O-6 - Captain / Colonel</option>
                            <option value="O-7">O-7 - Rear Admiral (LH) / Brigadier General</option>
                            <option value="O-8">O-8 - Rear Admiral / Major General</option>
                            <option value="O-9">O-9 - Vice Admiral / Lieutenant General</option>
                            <option value="O-10">O-10 - Admiral / General</option>
                        </optgroup>
                    </select>
                </div>

                <!-- Years of Service for Pay -->
                <div class="form-group">
                    <label>Years of Service at Time You Receive Pay
                        <span class="info-tooltip" tabindex="0" data-tooltip="IMPORTANT: This is your total years of service when you START RECEIVING PAY (not when you stop drilling). Time in the Retired Reserve (gray area) counts! Example: If you retire from drilling at 20 years but don't receive pay until age 60 (15 years later), enter 35 years.">?</span>
                    </label>
                    <select id="yearsOfService">
                        <option value="2">Less than 2 years</option>
                        <option value="2">2 years</option>
                        <option value="3">3 years</option>
                        <option value="4">4 years</option>
                        <option value="6">6 years</option>
                        <option value="8">8 years</option>
                        <option value="10">10 years</option>
                        <option value="12">12 years</option>
                        <option value="14">14 years</option>
                        <option value="16">16 years</option>
                        <option value="18">18 years</option>
                        <option value="20">20 years</option>
                        <option value="22">22 years</option>
                        <option value="24">24 years</option>
                        <option value="26">26 years</option>
                        <option value="28">28 years</option>
                        <option value="30">30 years</option>
                        <option value="32">32 years</option>
                        <option value="34">34 years</option>
                        <option value="36">36 years</option>
                        <option value="38">38 years</option>
                        <option value="40">40+ years</option>
                    </select>
                    <p class="hint">Include time in the Retired Reserve ("gray area") waiting for pay. This moves you up the pay table.</p>
                    <div class="yos-calculator">
                        <button type="button" class="yos-calc-toggle" onclick="toggleYOSCalculator()">üìä Help me calculate my years of service</button>
                        <div id="yosCalcSection" class="yos-calc-section" style="display: none;">
                            <div class="yos-calc-row">
                                <label>Year you entered service:</label>
                                <input type="number" id="yosEntryYear" placeholder="e.g., 2005" min="1950" max="2030">
                            </div>
                            <div class="yos-calc-row">
                                <label>Year you'll start receiving pay:</label>
                                <span id="yosPayYear" class="yos-calc-value">Enter DOB below</span>
                            </div>
                            <div class="yos-calc-result" id="yosCalcResult" style="display: none;">
                                <strong>Estimated Years of Service:</strong> <span id="yosCalcTotal">0</span> years
                                <p class="yos-calc-explanation" id="yosCalcExplanation"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Date of Birth -->
                <div class="form-group">
                    <label>Date of Birth
                        <span class="info-tooltip" tabindex="0" data-tooltip="Your date of birth is used to calculate the year you will begin receiving retirement pay based on your eligible age.">?</span>
                    </label>
                    <input type="date" id="dateOfBirth" value="">
                    <p class="hint">Used to calculate when you'll start receiving pay</p>
                </div>

                <!-- Age Eligible for Pay -->
                <div class="form-group">
                    <label>Age Eligible for Pay
                        <span class="info-tooltip" tabindex="0" data-tooltip="Standard eligibility is age 60. However, for each 90 days of qualifying active duty service after January 28, 2008, you can reduce your eligibility age by 3 months (minimum age 50).">?</span>
                    </label>
                    <select id="ageEligible">
                        <option value="50">50 years, 0 months</option>
                        <option value="50.25">50 years, 3 months</option>
                        <option value="50.5">50 years, 6 months</option>
                        <option value="50.75">50 years, 9 months</option>
                        <option value="51">51 years, 0 months</option>
                        <option value="51.25">51 years, 3 months</option>
                        <option value="51.5">51 years, 6 months</option>
                        <option value="51.75">51 years, 9 months</option>
                        <option value="52">52 years, 0 months</option>
                        <option value="52.25">52 years, 3 months</option>
                        <option value="52.5">52 years, 6 months</option>
                        <option value="52.75">52 years, 9 months</option>
                        <option value="53">53 years, 0 months</option>
                        <option value="53.25">53 years, 3 months</option>
                        <option value="53.5">53 years, 6 months</option>
                        <option value="53.75">53 years, 9 months</option>
                        <option value="54">54 years, 0 months</option>
                        <option value="54.25">54 years, 3 months</option>
                        <option value="54.5">54 years, 6 months</option>
                        <option value="54.75">54 years, 9 months</option>
                        <option value="55">55 years, 0 months</option>
                        <option value="55.25">55 years, 3 months</option>
                        <option value="55.5">55 years, 6 months</option>
                        <option value="55.75">55 years, 9 months</option>
                        <option value="56">56 years, 0 months</option>
                        <option value="56.25">56 years, 3 months</option>
                        <option value="56.5">56 years, 6 months</option>
                        <option value="56.75">56 years, 9 months</option>
                        <option value="57">57 years, 0 months</option>
                        <option value="57.25">57 years, 3 months</option>
                        <option value="57.5">57 years, 6 months</option>
                        <option value="57.75">57 years, 9 months</option>
                        <option value="58">58 years, 0 months</option>
                        <option value="58.25">58 years, 3 months</option>
                        <option value="58.5">58 years, 6 months</option>
                        <option value="58.75">58 years, 9 months</option>
                        <option value="59">59 years, 0 months</option>
                        <option value="59.25">59 years, 3 months</option>
                        <option value="59.5">59 years, 6 months</option>
                        <option value="59.75">59 years, 9 months</option>
                        <option value="60" selected>60 years, 0 months (Standard)</option>
                    </select>
                    <p class="hint">Standard is 60; may be reduced for qualifying active duty after Jan 28, 2008</p>
                    <a href="early-retirement-calculator.html" class="early-retirement-link">üìã Calculate your early retirement eligibility ‚Üí</a>
                </div>

                <div class="age-display" id="payStartYearDisplay" style="display: none;">
                    <div class="label">You will start receiving pay in</div>
                    <div class="value" id="payStartYear">2040</div>
                </div>

                <!-- Pay Table Growth (Pre-Retirement) -->
                <div class="form-group" style="margin-top: 1.5rem;">
                    <label>Pay Table Growth (Until You Start Receiving Pay)
                        <span class="info-tooltip" tabindex="0" data-tooltip="Military pay tables typically increase each year (averaging 2.5-3.5%). This estimates how much your High-36 base pay will grow between now and when you start receiving retirement pay. Only applies if your pay start date is after 2026.">?</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="payGrowth" id="payGrowthHigh" value="high">
                            <label for="payGrowthHigh">High (3.5%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="payGrowth" id="payGrowthMedium" value="medium" checked>
                            <label for="payGrowthMedium">Medium (2.8%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="payGrowth" id="payGrowthLow" value="low">
                            <label for="payGrowthLow">Low (2.0%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="payGrowth" id="payGrowthNone" value="none">
                            <label for="payGrowthNone">None (Use 2026 Tables)</label>
                        </div>
                    </div>
                    <p class="hint">Estimated annual increase to military pay tables before you start receiving pay</p>
                    <div id="payGrowthNote" class="pay-growth-note" style="display: none;"></div>
                </div>

                <!-- COLA Options -->
                <div class="form-group" style="margin-top: 1.5rem;">
                    <label>COLA Projection (After You Start Receiving Pay)
                        <span class="info-tooltip" tabindex="0" data-tooltip="Cost-of-Living Adjustment (COLA) is applied annually to military retirement pay based on inflation. Historical average is about 2-3%. High (3.5%) assumes higher inflation, Low (1.5%) assumes lower inflation.">?</span>
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="cola" id="colaHigh" value="high">
                            <label for="colaHigh">High (3.5%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="cola" id="colaMedium" value="medium" checked>
                            <label for="colaMedium">Medium (2.5%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="cola" id="colaLow" value="low">
                            <label for="colaLow">Low (1.5%)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="cola" id="colaNone" value="none">
                            <label for="colaNone">None</label>
                        </div>
                    </div>
                    <p class="hint">Projected annual cost-of-living adjustment applied to retirement pay</p>
                </div>

                <!-- SBP Section -->
                <div class="sbp-section">
                    <div class="checkbox-group">
                        <input type="checkbox" id="includeSBP">
                        <label for="includeSBP">Include Survivor Benefit Plan (SBP) Cost
                            <span class="info-tooltip" tabindex="0" data-tooltip="SBP provides your spouse/dependents up to 55% of your retirement pay if you die. The premium is 6.5% of your covered amount. Premiums stop after 30 years of payments AND reaching age 70.">?</span>
                        </label>
                    </div>
                    <div id="sbpOptions" class="hidden" style="margin-top: 1rem;">
                        <div class="form-group">
                            <label>SBP Coverage Level
                                <span class="info-tooltip" tabindex="0" data-tooltip="Full coverage: Your survivor receives 55% of your full retirement pay. Partial coverage: Choose a specific dollar amount (minimum $300/month) as the base for the 55% benefit.">?</span>
                            </label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="sbpLevel" id="sbpFull" value="full" checked>
                                    <label for="sbpFull">Full (55%)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="sbpLevel" id="sbpPartial" value="partial">
                                    <label for="sbpPartial">Partial</label>
                                </div>
                            </div>
                        </div>
                        <div id="partialAmountSection" class="hidden form-group">
                            <label>Partial Coverage Amount ($/month)
                                <span class="info-tooltip" tabindex="0" data-tooltip="Enter the base amount for SBP coverage. Your survivor would receive 55% of this amount. Your premium will be 6.5% of this amount. Minimum is $300/month.">?</span>
                            </label>
                            <input type="number" id="partialAmount" placeholder="e.g., 500" min="300">
                            <p class="hint">Minimum $300/month</p>
                        </div>
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculateRetirement()">
                    ‚öì Calculate Retirement Pay
                </button>
            </div>

            <!-- Results Section -->
            <div class="card results-section" id="resultsSection">
                <div class="card-header">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h2>Your Estimated Retirement Pay</h2>
                </div>

                <div class="result-card">
                    <h3>Monthly Gross Retirement Pay</h3>
                    <div class="amount" id="monthlyGross">$0.00</div>
                    <div class="subtext" id="systemUsed">High-36 System</div>
                    <div class="subtext" id="payStartAge" style="margin-top: 0.25rem; color: var(--gold-light);">Starting at age 60</div>
                </div>

                <div class="result-card" id="netPayCard">
                    <h3>Monthly Net Pay (After SBP)</h3>
                    <div class="amount" id="monthlyNet">$0.00</div>
                    <div class="subtext">After SBP premium deduction</div>
                </div>

                <div class="result-card">
                    <h3>First Year Retirement Pay</h3>
                    <div class="amount" id="annualPay">$0.00</div>
                    <div class="subtext" id="annualSubtext">Before taxes</div>
                </div>

                <div class="breakdown">
                    <h4 style="color: var(--gold); margin-bottom: 1rem;">Calculation Breakdown</h4>
                    <div class="breakdown-row">
                        <span>Total Points</span>
                        <span id="breakdownPoints">0</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Point Years (Points √∑ 360)</span>
                        <span id="breakdownPointYears">0.00</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Multiplier Rate</span>
                        <span id="breakdownMultiplier">2.5%</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Benefit Multiplier</span>
                        <span id="breakdownBenefitPct">0.00%</span>
                    </div>
                    <div class="breakdown-row">
                        <span>2026 Base Pay</span>
                        <span id="breakdownBasePay2026">$0.00</span>
                    </div>
                    <div class="breakdown-row" id="payGrowthRow" style="display: none;">
                        <span id="payGrowthLabel">Pay Table Growth (0 yrs @ 0%)</span>
                        <span id="breakdownPayGrowth">+$0.00</span>
                    </div>
                    <div class="breakdown-row">
                        <span>Estimated Base Pay at Retirement</span>
                        <span id="breakdownBasePay">$0.00</span>
                    </div>
                    <div class="breakdown-row" id="sbpRow" style="display: none;">
                        <span>SBP Premium (6.5%)</span>
                        <span id="breakdownSBP">-$0.00</span>
                    </div>
                    <div class="breakdown-row total">
                        <span>Monthly Retired Pay</span>
                        <span id="breakdownTotal">$0.00</span>
                    </div>
                </div>

                <div class="cola-projections" id="colaProjections">
                    <h4>üìà COLA Projections (Next 10 Years)</h4>
                    <table class="projection-table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Monthly Pay</th>
                                <th>Annual Pay</th>
                            </tr>
                        </thead>
                        <tbody id="colaTableBody">
                        </tbody>
                    </table>
                </div>

                <div class="breakdown" style="margin-top: 1.5rem; background: rgba(201, 162, 39, 0.1);">
                    <h4 style="color: var(--gold); margin-bottom: 0.75rem;">‚ÑπÔ∏è Important Notes</h4>
                    <ul style="font-size: 0.85rem; line-height: 1.6; padding-left: 1.25rem; color: var(--gray-light);">
                        <li>Reserve retirement pay begins at age 60 (or earlier with qualifying active duty service)</li>
                        <li>Retirement pay is subject to federal income tax (and state tax in most states)</li>
                        <li>TRICARE coverage available at age 60 with retirement pay</li>
                        <li id="brsNote" class="hidden">BRS includes TSP government matching (up to 5%) not shown here</li>
                        <li id="sbpNote" class="hidden">SBP premiums are paid pre-tax, reducing taxable income</li>
                        <li id="sbpPaidUpNote" class="hidden">SBP becomes "paid up" after 30 years of premiums AND reaching age 70</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer" role="contentinfo">
        <p>This calculator is for estimation purposes only. For official calculations, contact
        <a href="https://www.dfas.mil" target="_blank" rel="noopener noreferrer">DFAS</a> or your servicing personnel office.</p>
        <p style="margin-top: 0.5rem;">Base pay tables effective January 1, 2026 (3.8% raise). Future pay table growth is estimated and actual rates may vary.</p>
        <p style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
            <a href="#" onclick="showPrivacyPolicy(); return false;">Privacy Policy</a> |
            <a href="#" onclick="showTermsOfUse(); return false;">Terms of Use</a> |
            <a href="#" onclick="showDisclaimer(); return false;">Full Disclaimer</a>
        </p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--gray);">
            This site is not affiliated with the Department of Defense, DFAS, or any government agency.
        </p>
    </footer>

    <script>
        // 2026 Military Pay Tables (3.8% raise applied)
        // Format: payGrade: { yearsOfService: monthlyPay }
        const payTable2026 = {
            'E-1': { 2: 2407.20, 3: 2407.20, 4: 2407.20, 6: 2407.20, 8: 2407.20, 10: 2407.20, 12: 2407.20, 14: 2407.20, 16: 2407.20, 18: 2407.20, 20: 2407.20, 22: 2407.20, 24: 2407.20, 26: 2407.20, 28: 2407.20, 30: 2407.20, 32: 2407.20, 34: 2407.20, 36: 2407.20, 38: 2407.20, 40: 2407.20 },
            'E-2': { 2: 2699.10, 3: 2699.10, 4: 2699.10, 6: 2699.10, 8: 2699.10, 10: 2699.10, 12: 2699.10, 14: 2699.10, 16: 2699.10, 18: 2699.10, 20: 2699.10, 22: 2699.10, 24: 2699.10, 26: 2699.10, 28: 2699.10, 30: 2699.10, 32: 2699.10, 34: 2699.10, 36: 2699.10, 38: 2699.10, 40: 2699.10 },
            'E-3': { 2: 2839.20, 3: 3019.50, 4: 3200.40, 6: 3200.40, 8: 3200.40, 10: 3200.40, 12: 3200.40, 14: 3200.40, 16: 3200.40, 18: 3200.40, 20: 3200.40, 22: 3200.40, 24: 3200.40, 26: 3200.40, 28: 3200.40, 30: 3200.40, 32: 3200.40, 34: 3200.40, 36: 3200.40, 38: 3200.40, 40: 3200.40 },
            'E-4': { 2: 3144.60, 3: 3306.60, 4: 3468.00, 6: 3630.60, 8: 3793.20, 10: 3793.20, 12: 3793.20, 14: 3793.20, 16: 3793.20, 18: 3793.20, 20: 3793.20, 22: 3793.20, 24: 3793.20, 26: 3793.20, 28: 3793.20, 30: 3793.20, 32: 3793.20, 34: 3793.20, 36: 3793.20, 38: 3793.20, 40: 3793.20 },
            'E-5': { 2: 3431.10, 3: 3664.50, 4: 3850.80, 6: 4037.10, 8: 4306.80, 10: 4532.10, 12: 4734.00, 14: 4876.20, 16: 4876.20, 18: 4876.20, 20: 4876.20, 22: 4876.20, 24: 4876.20, 26: 4876.20, 28: 4876.20, 30: 4876.20, 32: 4876.20, 34: 4876.20, 36: 4876.20, 38: 4876.20, 40: 4876.20 },
            'E-6': { 2: 3745.80, 3: 4124.70, 4: 4313.40, 6: 4502.10, 8: 4690.80, 10: 4974.30, 12: 5127.00, 14: 5308.50, 16: 5457.30, 18: 5563.20, 20: 5670.60, 22: 5758.20, 24: 5758.20, 26: 5758.20, 28: 5758.20, 30: 5758.20, 32: 5758.20, 34: 5758.20, 36: 5758.20, 38: 5758.20, 40: 5758.20 },
            'E-7': { 2: 4331.40, 3: 4727.10, 4: 4964.70, 6: 5203.80, 8: 5441.10, 10: 5677.50, 12: 5857.80, 14: 6184.50, 16: 6423.00, 18: 6610.80, 20: 6773.40, 22: 6986.70, 24: 7175.40, 26: 7455.00, 28: 7455.00, 30: 7455.00, 32: 7455.00, 34: 7455.00, 36: 7455.00, 38: 7455.00, 40: 7455.00 },
            'E-8': { 2: 4935.60, 3: 5436.90, 4: 5613.00, 6: 5792.10, 8: 6062.70, 10: 6343.50, 12: 6573.00, 14: 6853.20, 16: 7080.60, 18: 7316.70, 20: 7545.00, 22: 7831.50, 24: 8047.80, 26: 8350.20, 28: 8350.20, 30: 8350.20, 32: 8350.20, 34: 8350.20, 36: 8350.20, 38: 8350.20, 40: 8350.20 },
            'E-9': { 2: 5970.90, 3: 6547.50, 4: 6741.00, 6: 6941.70, 8: 7147.50, 10: 7459.20, 12: 7781.40, 14: 8102.70, 16: 8491.20, 18: 8766.00, 20: 9098.40, 22: 9409.50, 24: 9733.80, 26: 10200.00, 28: 10200.00, 30: 10710.00, 32: 10710.00, 34: 10710.00, 36: 10710.00, 38: 10710.00, 40: 10710.00 },
            'W-1': { 2: 4023.30, 3: 4451.40, 4: 4570.20, 6: 4775.70, 8: 5092.50, 10: 5401.50, 12: 5656.80, 14: 5933.10, 16: 6171.90, 18: 6408.30, 20: 6647.70, 22: 6885.60, 24: 6885.60, 26: 6885.60, 28: 6885.60, 30: 6885.60, 32: 6885.60, 34: 6885.60, 36: 6885.60, 38: 6885.60, 40: 6885.60 },
            'W-2': { 2: 4528.50, 3: 4963.80, 4: 5097.60, 6: 5244.00, 8: 5565.60, 9: 5895.00, 10: 6058.80, 12: 6310.50, 14: 6568.80, 16: 6822.00, 18: 7045.20, 20: 7280.10, 22: 7526.70, 24: 7737.90, 26: 7737.90, 28: 7737.90, 30: 7737.90, 32: 7737.90, 34: 7737.90, 36: 7737.90, 38: 7737.90, 40: 7737.90 },
            'W-3': { 2: 5128.20, 3: 5336.70, 4: 5547.00, 6: 5622.00, 8: 5856.00, 10: 6318.00, 12: 6609.00, 14: 6875.10, 16: 7155.90, 18: 7432.80, 20: 7746.90, 22: 7986.60, 24: 8235.60, 26: 8534.40, 28: 8534.40, 30: 8534.40, 32: 8534.40, 34: 8534.40, 36: 8534.40, 38: 8534.40, 40: 8534.40 },
            'W-4': { 2: 5614.50, 3: 5869.50, 4: 6041.40, 6: 6214.50, 8: 6512.10, 10: 6810.00, 12: 7107.30, 14: 7488.00, 16: 7849.20, 18: 8143.20, 20: 8435.10, 22: 8721.30, 24: 9014.70, 26: 9377.70, 28: 9678.30, 30: 9978.00, 32: 9978.00, 34: 9978.00, 36: 9978.00, 38: 9978.00, 40: 9978.00 },
            'W-5': { 2: 6216.90, 3: 6618.90, 4: 6868.50, 6: 7068.30, 8: 7399.20, 10: 7729.80, 12: 8060.40, 14: 8461.50, 16: 8867.40, 18: 9207.00, 20: 9609.00, 22: 10005.60, 24: 10407.90, 26: 10892.10, 28: 11311.80, 30: 11731.50, 32: 11731.50, 34: 11731.50, 36: 11731.50, 38: 11731.50, 40: 11731.50 },
            'O-1': { 2: 4306.50, 3: 4482.60, 4: 5421.90, 6: 5421.90, 8: 5421.90, 10: 5421.90, 12: 5421.90, 14: 5421.90, 16: 5421.90, 18: 5421.90, 20: 5421.90, 22: 5421.90, 24: 5421.90, 26: 5421.90, 28: 5421.90, 30: 5421.90, 32: 5421.90, 34: 5421.90, 36: 5421.90, 38: 5421.90, 40: 5421.90 },
            'O-2': { 2: 4961.10, 3: 5648.10, 4: 6507.00, 6: 6728.70, 8: 6868.50, 10: 6868.50, 12: 6868.50, 14: 6868.50, 16: 6868.50, 18: 6868.50, 20: 6868.50, 22: 6868.50, 24: 6868.50, 26: 6868.50, 28: 6868.50, 30: 6868.50, 32: 6868.50, 34: 6868.50, 36: 6868.50, 38: 6868.50, 40: 6868.50 },
            'O-3': { 2: 5729.40, 3: 6493.80, 4: 7014.00, 6: 7651.20, 8: 8021.40, 10: 8420.70, 12: 8729.70, 14: 8992.20, 15: 9287.10, 16: 9287.10, 18: 9551.70, 20: 9551.70, 22: 9551.70, 24: 9551.70, 26: 9551.70, 28: 9551.70, 30: 9551.70, 32: 9551.70, 34: 9551.70, 36: 9551.70, 38: 9551.70, 40: 9551.70 },
            'O-4': { 2: 6520.50, 3: 7544.40, 4: 8047.80, 6: 8155.20, 8: 8631.30, 10: 9227.10, 12: 9704.70, 14: 10082.10, 16: 10344.60, 18: 10584.30, 20: 10764.60, 22: 10764.60, 24: 10764.60, 26: 10764.60, 28: 10764.60, 30: 10764.60, 32: 10764.60, 34: 10764.60, 36: 10764.60, 38: 10764.60, 40: 10764.60 },
            'O-5': { 2: 7554.00, 3: 8516.40, 4: 9106.20, 6: 9212.10, 8: 9577.50, 10: 10072.80, 12: 10569.00, 14: 10931.40, 16: 11295.30, 18: 11741.10, 20: 12104.70, 22: 12393.00, 24: 12735.00, 26: 12735.00, 28: 12735.00, 30: 12735.00, 32: 12735.00, 34: 12735.00, 36: 12735.00, 38: 12735.00, 40: 12735.00 },
            'O-6': { 2: 9060.30, 3: 9950.70, 4: 10606.20, 6: 10606.20, 8: 10648.80, 10: 11007.00, 12: 11067.90, 14: 11067.90, 16: 11739.00, 18: 12865.50, 20: 13499.40, 22: 13822.80, 24: 14192.70, 26: 14891.40, 28: 15638.40, 30: 15638.40, 32: 15638.40, 34: 15638.40, 36: 15638.40, 38: 15638.40, 40: 15638.40 },
            'O-7': { 2: 10949.40, 3: 11458.80, 4: 11695.20, 6: 11876.10, 8: 12203.10, 10: 12544.50, 12: 12885.90, 14: 13231.50, 16: 13618.50, 18: 14864.70, 20: 15495.00, 22: 15495.00, 24: 15495.00, 26: 15809.70, 28: 15809.70, 30: 16124.70, 32: 16124.70, 34: 16124.70, 36: 16124.70, 38: 16124.70, 40: 16124.70 },
            'O-8': { 2: 13203.90, 3: 13618.50, 4: 13906.80, 6: 13976.40, 8: 14332.50, 10: 14864.70, 12: 15213.60, 14: 15562.50, 16: 15966.00, 18: 16762.80, 20: 17316.90, 22: 17696.10, 24: 18074.70, 26: 18074.70, 28: 18074.70, 30: 18453.60, 32: 18453.60, 34: 18808.20, 36: 18808.20, 38: 18808.20, 40: 18808.20 },
            'O-9': { 2: 14133.00, 3: 14863.80, 4: 15158.10, 6: 15358.80, 8: 15562.50, 10: 16048.80, 12: 16540.80, 14: 17032.80, 16: 17579.70, 18: 18281.40, 20: 18808.20, 22: 18808.20, 24: 18808.20, 26: 18808.20, 28: 18808.20, 30: 18808.20, 32: 18808.20, 34: 18808.20, 36: 18808.20, 38: 18808.20, 40: 18808.20 },
            'O-10': { 2: 17579.70, 3: 17579.70, 4: 17579.70, 6: 17579.70, 8: 17579.70, 10: 17579.70, 12: 17579.70, 14: 17579.70, 16: 17579.70, 18: 17579.70, 20: 18808.20, 22: 18808.20, 24: 18808.20, 26: 18808.20, 28: 18808.20, 30: 18808.20, 32: 18808.20, 34: 18808.20, 36: 18808.20, 38: 18808.20, 40: 18808.20 }
        };

        // COLA rates
        const colaRates = {
            high: 0.035,
            medium: 0.025,
            low: 0.015,
            none: 0
        };

        let currentSystem = 'high36';

        function selectSystem(system) {
            currentSystem = system;
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-system="${system}"]`).classList.add('active');

            const hint = document.getElementById('systemHint');
            if (system === 'high36') {
                hint.textContent = 'For members who entered service before January 1, 2018, and did not opt into BRS.';
            } else {
                hint.textContent = 'For members who entered service on/after January 1, 2018, or opted in. Includes TSP matching.';
            }
        }

        // Setup tooltip click handlers for mobile/touch devices
        function setupTooltips() {
            document.querySelectorAll('.info-tooltip').forEach(tooltip => {
                tooltip.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    // Close any other open tooltips
                    document.querySelectorAll('.info-tooltip.active').forEach(t => {
                        if (t !== this) t.classList.remove('active');
                    });

                    // Toggle this tooltip
                    this.classList.toggle('active');
                });
            });

            // Close tooltips when clicking elsewhere
            document.addEventListener('click', function(e) {
                if (!e.target.classList.contains('info-tooltip')) {
                    document.querySelectorAll('.info-tooltip.active').forEach(t => {
                        t.classList.remove('active');
                    });
                }
            });
        }

        // Calculate pay start date from DOB and eligible age
        function getPayStartDate(dob, ageEligible) {
            const birthDate = new Date(dob);
            const years = Math.floor(ageEligible);
            const months = Math.round((ageEligible - years) * 12);

            const payStartDate = new Date(birthDate);
            payStartDate.setFullYear(payStartDate.getFullYear() + years);
            payStartDate.setMonth(payStartDate.getMonth() + months);

            return payStartDate;
        }

        // Format date as "Month Year" (e.g., "March 2040")
        function formatPayStartDate(date) {
            const options = { month: 'long', year: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // Calculate and display the date pay will start
        function updatePayStartYear() {
            const dob = document.getElementById('dateOfBirth').value;
            const ageEligible = parseFloat(document.getElementById('ageEligible').value);
            const displayDiv = document.getElementById('payStartYearDisplay');
            const payGrowthNote = document.getElementById('payGrowthNote');

            if (dob) {
                const payStartDate = getPayStartDate(dob, ageEligible);
                const payStartYear = payStartDate.getFullYear();
                document.getElementById('payStartYear').textContent = formatPayStartDate(payStartDate);
                displayDiv.style.display = 'block';

                // Update pay growth note
                const yearsUntilPay = payStartYear - 2026;
                if (yearsUntilPay > 0) {
                    payGrowthNote.innerHTML = `<strong>üìä ${yearsUntilPay} years</strong> between 2026 pay tables and your pay start date (${payStartYear}). Pay table growth will be applied to estimate your future base pay.`;
                    payGrowthNote.style.display = 'block';
                } else {
                    payGrowthNote.innerHTML = `Your pay starts in ${payStartYear}. Current 2026 pay tables will be used (no growth applied).`;
                    payGrowthNote.style.display = 'block';
                }
            } else {
                displayDiv.style.display = 'none';
                payGrowthNote.style.display = 'none';
            }
        }

        function toggleSBPOptions() {
            const includeSBP = document.getElementById('includeSBP').checked;
            const sbpOptions = document.getElementById('sbpOptions');
            sbpOptions.classList.toggle('hidden', !includeSBP);
        }

        function toggleYOSCalculator() {
            const section = document.getElementById('yosCalcSection');
            section.style.display = section.style.display === 'none' ? 'block' : 'none';
            updateYOSCalculator();
        }

        function updateYOSCalculator() {
            const dob = document.getElementById('dateOfBirth').value;
            const ageEligible = parseFloat(document.getElementById('ageEligible').value);
            const entryYear = parseInt(document.getElementById('yosEntryYear').value);
            const payYearSpan = document.getElementById('yosPayYear');
            const resultDiv = document.getElementById('yosCalcResult');

            if (dob) {
                const payStartDate = getPayStartDate(dob, ageEligible);
                const payYear = payStartDate.getFullYear();
                payYearSpan.textContent = payYear;

                if (entryYear && entryYear > 1950 && entryYear <= new Date().getFullYear()) {
                    const totalYOS = payYear - entryYear;
                    document.getElementById('yosCalcTotal').textContent = totalYOS;

                    // Find the gray area time
                    const dobDate = new Date(dob);
                    const ageAtEntry = entryYear - dobDate.getFullYear();
                    const retireFromDrillingAge = Math.min(ageAtEntry + 20, 60); // Assume 20-year career or until 60
                    const grayAreaYears = Math.max(0, ageEligible - retireFromDrillingAge);

                    let explanation = `From ${entryYear} to ${payYear} = ${totalYOS} years total.`;
                    if (grayAreaYears > 0) {
                        explanation += ` This likely includes ~${Math.round(grayAreaYears)} years in the Retired Reserve (gray area).`;
                    }

                    document.getElementById('yosCalcExplanation').textContent = explanation;
                    resultDiv.style.display = 'block';

                    // Auto-select the closest YOS option
                    const yosSelect = document.getElementById('yearsOfService');
                    const options = Array.from(yosSelect.options).map(o => parseInt(o.value));
                    const closest = options.reduce((prev, curr) =>
                        Math.abs(curr - totalYOS) < Math.abs(prev - totalYOS) ? curr : prev
                    );
                    yosSelect.value = closest;
                } else {
                    resultDiv.style.display = 'none';
                }
            } else {
                payYearSpan.textContent = 'Enter DOB below';
                resultDiv.style.display = 'none';
            }
        }

        function togglePartialAmount() {
            const isPartial = document.getElementById('sbpPartial').checked;
            const partialSection = document.getElementById('partialAmountSection');
            partialSection.classList.toggle('hidden', !isPartial);
        }

        function getBasePay(grade, years) {
            const gradeData = payTable2026[grade];
            if (!gradeData) return 0;

            // Find the appropriate years bracket
            const yearsBrackets = Object.keys(gradeData).map(Number).sort((a, b) => a - b);
            let applicableYears = yearsBrackets[0];

            for (const bracket of yearsBrackets) {
                if (years >= bracket) {
                    applicableYears = bracket;
                }
            }

            return gradeData[applicableYears];
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2
            }).format(amount);
        }

        function calculateRetirement() {
            const totalPoints = parseInt(document.getElementById('totalPoints').value) || 0;
            const payGrade = document.getElementById('payGrade').value;
            const yearsOfService = parseInt(document.getElementById('yearsOfService').value);
            const ageEligible = parseFloat(document.getElementById('ageEligible').value);
            const dob = document.getElementById('dateOfBirth').value;
            const payGrowthOption = document.querySelector('input[name="payGrowth"]:checked').value;
            const colaOption = document.querySelector('input[name="cola"]:checked').value;
            const includeSBP = document.getElementById('includeSBP').checked;
            const sbpLevel = document.querySelector('input[name="sbpLevel"]:checked')?.value || 'full';
            const partialAmount = parseFloat(document.getElementById('partialAmount').value) || 0;

            // Validate date of birth
            if (!dob) {
                alert('Please enter your date of birth to calculate when you will start receiving pay.');
                return;
            }

            // Validate minimum points
            if (totalPoints < 1000) {
                alert('You need at least 1,000 retirement points to be eligible for reserve retirement.');
                return;
            }

            // Calculate pay start date
            const payStartDate = getPayStartDate(dob, ageEligible);
            const payStartYear = payStartDate.getFullYear();
            const payStartDateFormatted = formatPayStartDate(payStartDate);

            // Get base pay for the grade and years (2026 tables)
            const basePay2026 = getBasePay(payGrade, yearsOfService);

            // Apply pay table growth from 2026 to pay start year
            const payGrowthRates = { high: 0.035, medium: 0.028, low: 0.02, none: 0 };
            const payGrowthRate = payGrowthRates[payGrowthOption];
            const yearsUntilPay = Math.max(0, payStartYear - 2026);
            const payGrowthMultiplier = Math.pow(1 + payGrowthRate, yearsUntilPay);
            const basePay = basePay2026 * payGrowthMultiplier;

            // Calculate point years (points / 360)
            const pointYears = totalPoints / 360;

            // Calculate multiplier based on system
            // High-36: 2.5% per point year
            // BRS: 2.0% per point year
            const multiplierRate = currentSystem === 'high36' ? 0.025 : 0.02;
            const benefitMultiplier = pointYears * multiplierRate;

            // Calculate monthly gross retired pay
            const monthlyGross = basePay * benefitMultiplier;

            // Calculate SBP premium if applicable
            let sbpPremium = 0;
            let sbpBaseAmount = monthlyGross;

            if (includeSBP) {
                if (sbpLevel === 'full') {
                    sbpBaseAmount = monthlyGross;
                } else {
                    sbpBaseAmount = Math.max(partialAmount, 300);
                }
                // SBP premium is 6.5% of the elected base amount
                sbpPremium = sbpBaseAmount * 0.065;
            }

            const monthlyNet = monthlyGross - sbpPremium;
            const fullAnnualPay = monthlyNet * 12;

            // Calculate first year pay (partial year)
            const payStartMonth = payStartDate.getMonth(); // 0-11
            const monthsInFirstYear = 12 - payStartMonth;
            const firstYearPay = monthlyNet * monthsInFirstYear;

            // Update display
            document.getElementById('resultsSection').classList.add('active');
            document.getElementById('monthlyGross').textContent = formatCurrency(monthlyGross);
            document.getElementById('monthlyNet').textContent = formatCurrency(monthlyNet);
            document.getElementById('annualPay').textContent = formatCurrency(firstYearPay);
            document.getElementById('annualSubtext').textContent = `${monthsInFirstYear} months in ${payStartYear} (before taxes)`;
            document.getElementById('systemUsed').textContent = currentSystem === 'high36' ? 'High-36 (Legacy) System' : 'Blended Retirement System (BRS)';
            // Format the age display
            const ageYears = Math.floor(ageEligible);
            const ageMonths = Math.round((ageEligible - ageYears) * 12);
            const ageDisplay = ageMonths > 0 ? `${ageYears} years, ${ageMonths} months` : `${ageYears} years`;

            document.getElementById('payStartAge').textContent = ageEligible === 60
                ? `Starting ${payStartDateFormatted} at age 60`
                : `Starting ${payStartDateFormatted} at age ${ageDisplay} (early eligibility)`;

            // Update breakdown
            document.getElementById('breakdownPoints').textContent = totalPoints.toLocaleString();
            document.getElementById('breakdownPointYears').textContent = pointYears.toFixed(2);
            document.getElementById('breakdownMultiplier').textContent = (multiplierRate * 100).toFixed(1) + '% per year';
            document.getElementById('breakdownBenefitPct').textContent = (benefitMultiplier * 100).toFixed(2) + '%';
            document.getElementById('breakdownBasePay2026').textContent = formatCurrency(basePay2026);
            document.getElementById('breakdownBasePay').textContent = formatCurrency(basePay);
            document.getElementById('breakdownTotal').textContent = formatCurrency(monthlyNet);

            // Show/hide pay growth row
            const payGrowthRow = document.getElementById('payGrowthRow');
            if (yearsUntilPay > 0 && payGrowthOption !== 'none') {
                payGrowthRow.style.display = 'flex';
                const payGrowthAmount = basePay - basePay2026;
                const growthPctLabel = { high: '3.5%', medium: '2.8%', low: '2.0%' };
                document.getElementById('payGrowthLabel').textContent = `Pay Table Growth (${yearsUntilPay} yrs @ ${growthPctLabel[payGrowthOption]})`;
                document.getElementById('breakdownPayGrowth').textContent = '+' + formatCurrency(payGrowthAmount);
            } else {
                payGrowthRow.style.display = 'none';
            }

            // Show/hide SBP row
            const sbpRow = document.getElementById('sbpRow');
            const netPayCard = document.getElementById('netPayCard');
            const sbpNote = document.getElementById('sbpNote');
            const sbpPaidUpNote = document.getElementById('sbpPaidUpNote');

            if (includeSBP) {
                sbpRow.style.display = 'flex';
                document.getElementById('breakdownSBP').textContent = '-' + formatCurrency(sbpPremium);
                netPayCard.style.display = 'block';
                sbpNote.classList.remove('hidden');
                sbpPaidUpNote.classList.remove('hidden');
            } else {
                sbpRow.style.display = 'none';
                netPayCard.style.display = 'none';
                sbpNote.classList.add('hidden');
                sbpPaidUpNote.classList.add('hidden');
            }

            // Show/hide BRS note
            const brsNote = document.getElementById('brsNote');
            if (currentSystem === 'brs') {
                brsNote.classList.remove('hidden');
            } else {
                brsNote.classList.add('hidden');
            }

            // Generate COLA projections starting from pay eligibility year
            const colaRate = colaRates[colaOption];
            const colaTableBody = document.getElementById('colaTableBody');
            const colaProjectionsDiv = document.getElementById('colaProjections');

            if (colaRate > 0) {
                colaProjectionsDiv.style.display = 'block';
                colaTableBody.innerHTML = '';

                let projectedMonthly = monthlyNet;

                for (let i = 0; i <= 10; i++) {
                    if (i > 0) {
                        projectedMonthly *= (1 + colaRate);
                    }

                    // First year is partial (only months after pay starts)
                    let annualAmount;
                    let monthsNote = '';
                    if (i === 0) {
                        annualAmount = projectedMonthly * monthsInFirstYear;
                        monthsNote = ` (${monthsInFirstYear} mo)`;
                    } else {
                        annualAmount = projectedMonthly * 12;
                    }

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${payStartYear + i}${monthsNote}</td>
                        <td>${formatCurrency(projectedMonthly)}</td>
                        <td>${formatCurrency(annualAmount)}</td>
                    `;
                    colaTableBody.appendChild(row);
                }
            } else {
                colaProjectionsDiv.style.display = 'none';
            }

            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Event listeners
        document.getElementById('dateOfBirth').addEventListener('change', function() {
            updatePayStartYear();
            updateYOSCalculator();
        });
        document.getElementById('ageEligible').addEventListener('change', function() {
            updatePayStartYear();
            updateYOSCalculator();
        });
        document.getElementById('yosEntryYear').addEventListener('input', updateYOSCalculator);
        document.getElementById('includeSBP').addEventListener('change', toggleSBPOptions);
        document.getElementById('sbpFull').addEventListener('change', togglePartialAmount);
        document.getElementById('sbpPartial').addEventListener('change', togglePartialAmount);

        // Disclaimer modal functions
        function acceptDisclaimer() {
            document.getElementById('disclaimerModal').classList.remove('visible');
            localStorage.setItem('disclaimerAccepted', 'true');
            document.body.style.overflow = '';
        }

        function declineDisclaimer() {
            window.location.href = 'https://www.dfas.mil';
        }

        function showDisclaimer() {
            document.getElementById('disclaimerModal').classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function showPrivacyPolicy() {
            alert('Privacy Policy\n\nThis calculator does not collect, store, or transmit any personal information. All calculations are performed locally in your browser. No data is sent to any server.\n\nWe do not use cookies for tracking purposes. Your inputs are not saved when you leave this page.');
        }

        function showTermsOfUse() {
            alert('Terms of Use\n\n1. This calculator provides estimates only and is not a substitute for official DFAS calculations.\n\n2. Results should not be used for financial planning without verification from official sources.\n\n3. Pay tables and regulations may change; always verify with current official sources.\n\n4. This site is not affiliated with the Department of Defense or any government agency.\n\n5. Use of this calculator is at your own risk.');
        }

        // Input validation
        function validateInputs() {
            let isValid = true;
            const errors = [];

            const totalPoints = parseInt(document.getElementById('totalPoints').value) || 0;
            const dob = document.getElementById('dateOfBirth').value;

            if (!totalPoints || totalPoints < 1000) {
                errors.push('Total retirement points must be at least 1,000');
                document.getElementById('totalPoints').classList.add('input-error');
                isValid = false;
            } else {
                document.getElementById('totalPoints').classList.remove('input-error');
            }

            if (!dob) {
                errors.push('Date of birth is required');
                document.getElementById('dateOfBirth').classList.add('input-error');
                isValid = false;
            } else {
                document.getElementById('dateOfBirth').classList.remove('input-error');
            }

            return { isValid, errors };
        }

        // Sanitize input to prevent XSS
        function sanitizeInput(input) {
            if (typeof input === 'string') {
                return input.replace(/[<>\"'&]/g, '');
            }
            return input;
        }

        // Check for disclaimer acceptance on page load
        function checkDisclaimerAcceptance() {
            const accepted = localStorage.getItem('disclaimerAccepted');
            if (!accepted) {
                document.getElementById('disclaimerModal').classList.add('visible');
                document.body.style.overflow = 'hidden';
            }
        }

        // Analytics placeholder - replace with your analytics code
        function trackEvent(category, action, label) {
            // Example: Google Analytics
            // gtag('event', action, { 'event_category': category, 'event_label': label });
            console.log('Analytics event:', category, action, label);
        }

        // Track calculate button clicks
        const originalCalculate = calculateRetirement;
        calculateRetirement = function() {
            trackEvent('Calculator', 'Calculate', 'Retirement Pay');
            originalCalculate();
        };

        // Initialize
        setupTooltips();
        updatePayStartYear();
        checkDisclaimerAcceptance();
    </script>
</body>
</html>
